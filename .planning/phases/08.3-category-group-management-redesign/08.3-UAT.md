---
status: resolved
phase: 08.3-category-group-management-redesign
source: [08.3-01-SUMMARY.md, 08.3-02-SUMMARY.md, 08.3-03-SUMMARY.md, 08.3-04-SUMMARY.md, 08.3-05-SUMMARY.md]
started: 2026-02-18T13:00:00Z
updated: 2026-02-19T08:15:00Z
---

## Current Test

[testing complete]

## Tests

### 1. Collapsible parent rows
expected: Parent categories show chevron icon. All collapsed by default. Click chevron to expand/collapse. State persists across page reload.
result: pass

### 2. Checkbox multi-select
expected: Child and ungrouped categories show always-visible checkboxes. Checking boxes selects items. Parent rows do NOT have checkboxes (only children/ungrouped can be selected).
result: pass

### 3. Desktop action bar
expected: When one or more categories are checked, a header appears at the top of the categories section showing the selection count and four action buttons: Move to group, Ungroup, Hide, Delete. Buttons are disabled when nothing is selected.
result: issue
reported: "The header is not sticky at the top once it has been scrolled passed. Otherwise this works as expected."
severity: minor

### 4. Context menus on all row types
expected: Every category row has a three-dot menu icon. Parent menu shows: Ungroup, Edit name, Hide, Delete. Child menu shows: Reset weight, Edit name, Hide, Delete. Ungrouped menu shows: Edit name, Hide, Delete.
result: pass

### 5. Move to Group dialog
expected: Select one or more categories, click "Move to group" in the action bar. A dialog opens showing a searchable list of existing parent categories and a "Create new group" option at the bottom. Selecting a parent moves all selected categories into that group. Creating a new group creates the parent and moves items into it. Selection clears after move.
result: pass
note: "Child count shown per group in the dialog does not match the actual count"

### 6. Delete confirmation dialog
expected: Select categories, click "Delete" in the action bar. A confirmation dialog appears showing the count of categories being deleted. Confirming removes them. Selection clears after delete.
result: pass

### 7. Ungroup actions
expected: Two ungroup flows: (1) Select children in a group, click "Ungroup" in action bar — confirmation dialog appears, confirming moves them to ungrouped. (2) Click three-dot menu on a parent row, choose "Ungroup" — confirmation dialog appears, confirming dissolves the group (all children become ungrouped, inherited weights are preserved).
result: pass

### 8. Hide action with toast
expected: Click three-dot menu on any category, choose "Hide". The category disappears from the main tree and a toast confirms the action. The category leaves its group (if it was in one).
result: pass
note: "Hidden section header chevron does not rotate when opened, unlike group parent chevrons"

### 9. Hidden categories section with unhide
expected: At the bottom of the categories list, a collapsible "Hidden (N)" section appears (collapsed by default). Expanding it shows hidden categories. Each has an "Unhide" button/action. Unhiding returns the category to the ungrouped section with a toast.
result: pass

### 10. Mobile card layout
expected: At narrow viewport (below ~480px), category rows render as bordered cards with two rows: name/checkbox/menu on top, full-width weight strip on bottom. A floating action bar slides up from the bottom when items are selected.
result: pass
note: "Weight strip buttons show text as separate elements instead of on the buttons themselves"

## Summary

total: 10
passed: 8
issues: 4
pending: 0
skipped: 0

## Gaps

- truth: "Desktop action bar stays visible when scrolling the categories list"
  status: resolved
  reason: "User reported: The header is not sticky at the top once it has been scrolled passed. Otherwise this works as expected."
  severity: minor
  test: 3
  root_cause: "CategoryActionBar desktop Flex has no position: sticky. It is a static element inside the scrolling Box (settings page overflowY: auto). Needs position=sticky, top=0, zIndex=1."
  artifacts:
    - path: "frontend/src/components/settings/CategoryActionBar.tsx"
      issue: "Desktop Flex missing position: sticky, top: 0, zIndex: 1"
  missing:
    - "Add position=sticky, top=0, zIndex=1 to the desktop Flex element"
  debug_session: ""

- truth: "Hidden section header chevron rotates on expand/collapse like parent row chevrons"
  status: resolved
  reason: "User reported: The Hidden header chevron does not rotate when opened as the group parents do"
  severity: cosmetic
  test: 8
  root_cause: "HiddenCategoriesSection uses Collapsible.Indicator but no rotation CSS is applied. Parent rows use manual transform with isExpanded state. Collapsible.Indicator needs _open rotation style."
  artifacts:
    - path: "frontend/src/components/settings/HiddenCategoriesSection.tsx"
      issue: "Collapsible.Indicator missing rotation styles for open state"
  missing:
    - "Add rotation CSS to Collapsible.Indicator or wrap chevron with transform driven by data-state"
  debug_session: ""

- truth: "Mobile weight strip buttons show text labels on the buttons themselves"
  status: resolved
  reason: "User reported: Weight strip buttons don't have their associated text on them but as separate text"
  severity: cosmetic
  test: 10
  root_cause: "WeightPresetStrip renders all icon buttons in one map() loop, then all text labels in a second separate map() loop. Labels end up detached from their corresponding buttons in the DOM."
  artifacts:
    - path: "frontend/src/components/settings/WeightPresetStrip.tsx"
      issue: "Two separate map loops — buttons and labels rendered in separate groups instead of paired"
  missing:
    - "Collapse both loops into one so each button is immediately followed by its label"
  debug_session: ""

- truth: "Move to Group dialog shows correct child count per parent group"
  status: resolved
  reason: "User reported: Number of children for a group does not match the actual count in the dialog"
  severity: minor
  test: 5
  root_cause: "MoveToGroupDialog renders parent.article_count (articles linked to category) instead of child category count. childrenMap exists in CategoriesSection but is not passed to the dialog."
  artifacts:
    - path: "frontend/src/components/settings/MoveToGroupDialog.tsx"
      issue: "Displays parent.article_count instead of child category count"
    - path: "frontend/src/components/settings/CategoriesSection.tsx"
      issue: "childrenMap not passed to MoveToGroupDialog"
  missing:
    - "Add childrenMap prop to MoveToGroupDialog and use childrenMap[parent.id]?.length ?? 0"
  debug_session: ".planning/debug/move-dialog-wrong-child-count.md"
