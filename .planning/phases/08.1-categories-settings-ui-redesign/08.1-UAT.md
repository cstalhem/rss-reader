---
status: complete
phase: 08.1-categories-settings-ui-redesign
source: 08.1-01-SUMMARY.md, 08.1-02-SUMMARY.md, 08.1-03-SUMMARY.md, 08.1-04-SUMMARY.md
started: 2026-02-17T16:00:00Z
updated: 2026-02-17T17:00:00Z
---

## Current Test
<!-- OVERWRITE each test - shows where we are -->

[testing complete]

## Tests

### 1. Category Tree Structure
expected: Open Settings sidebar, navigate to Categories section. Tree shows parent categories with folder icon, semibold name, and child count. Child categories appear indented with connector lines. Ungrouped categories appear flat at root level.
result: issue
reported: "1. The last child should have a └── looking end line, not the same ├── line. The lines can also be a little bit more pronounced visually. 2. The count should be next to the group name, not aligned right as it currently is."
severity: cosmetic

### 2. Weight Inheritance Display
expected: Parent categories and child categories both show weight icons. Children that inherit their parent's weight display the weight strip at 50% opacity (dimmed). Children with explicit weight overrides show at full opacity.
result: issue
reported: "1. Weight icons should be smaller and less visually distinct — use accent color on icon/border of selected weight instead of accent background. 2. Use chevrons instead of up/down arrows. 3. Row layout should be: Parent: folder, name, count, flex space, weight group, edit/delete group. Child: line, drag handle, name, flex space, weight group, reset/edit/delete group. Don't reserve space for button groups when not hovered. 4. Include hover tooltips on all row buttons on desktop."
severity: cosmetic

### 3. Weight Preset Strip — Desktop Hover
expected: On desktop, each category row shows only the active weight icon (collapsed). Hover over the weight area — the strip smoothly expands to reveal all 5 weight options (block, reduce, normal, boost, max) with tooltips.
result: issue
reported: "The icon group simply appears, no smooth animation. Want buttons to 'grow' out smoothly. Will revisit after other tests for possible additional feedback."
severity: cosmetic

### 4. Set Category Weight
expected: Click a different weight icon on any category. The icon updates immediately to reflect the new weight. Refresh the page — the weight persists.
result: issue
reported: "Weight update is very slow, not immediate. Should be optimistic — update UI instantly, show toast on server success/fail, revert on failure."
severity: major

### 5. Override Child Weight
expected: Find a child category inheriting its parent's weight (50% opacity strip). Click a different weight on that child. The strip becomes full opacity (overridden). A reset button should appear to revert to inherited weight.
result: pass
note: "Functionally works. Visual styling issues from Tests 2-4 (icon styling, optimistic updates) apply here too."

### 6. Drag Category into Parent
expected: Drag an ungrouped category (or child from another parent) onto a parent row. The parent highlights as a drop target. On drop, the category appears as a child of that parent with connector lines.
result: issue
reported: "1. Drag performance is horrible, barely usable — priority fix. 2. Don't use placeholder item — animate highlight on the entire group (not just parent row). 3. Dragging ungrouped onto ungrouped to create new parent/child has no visual indicator — highlight parent row and add a distinct line underneath at child width. 4. BUG: Dropping ungrouped row back to its initial position creates a group with itself."
severity: blocker

### 7. Drag Category to Root
expected: Drag a child category from inside a parent to the root area (below the tree). The category becomes ungrouped and appears at root level without indentation.
result: issue
reported: "Not possible to drag a child to become ungrouped. It always selects another ungrouped row and sets it as a parent instead."
severity: major

### 8. Search / Filter Categories
expected: Type in the "Filter categories..." input above the tree. The tree filters to show only matching categories (case-insensitive). Drag handles disappear while search is active. Clear the search — full tree returns with drag handles.
result: issue
reported: "Filtering works functionally (pass) but typing the first character in search triggers a React console error: 'The final argument passed to useEffect changed size between renders' — the sensors array passed to DndContext changes size when toggling between DnD enabled/disabled (PointerSensor only vs PointerSensor+KeyboardSensor)."
severity: minor

### 9. Create New Category
expected: Click the "Add Category" button. A popover opens with an input field. Type a name (e.g., "machine-learning") and click Create. The new category appears at root level in the tree. Entering a duplicate name shows an error.
result: issue
reported: "Creating a new category seems to succeed but it does not show up in the list even after a page reload. Also needs success/fail toast messages."
severity: major

### 10. Rename Category
expected: Hover over any category row — a pencil icon appears. Click it. The name becomes an editable input. Change the name and press Enter. The category name updates in the tree and persists after refresh.
result: issue
reported: "Renaming parents and children of parents works. BUG: Renaming an ungrouped category does not update the name — instead a 'New' chip is rendered. Also from Test 9: duplicate name check not working when creating categories."
severity: major

### 11. Delete Leaf Category
expected: Hover over an ungrouped or child category — a trash icon appears. Click it. A confirmation dialog appears mentioning the category may reappear if the LLM discovers it again. Click Delete. The category is removed from the tree.
result: pass

### 12. Delete Parent Category
expected: Hover over a parent category with children — click the trash icon. Confirmation dialog mentions child count and that children will be released to root level. Click Delete. The parent disappears and its former children appear at root level.
result: issue
reported: "1. BUG: Deleting a parent also deletes the first child of the group. 2. Change behavior: parent action should be 'Split' group (all categories including parent become ungrouped) instead of deleting the parent — user may want to keep the category even without it being a parent. 3. BUG: Category names with special chars (e.g. AI/ML) break URL routing — 'DELETE /api/categories/ai/ml' returns 404. Categories need a URL-safe slug/id for API operations and a separate display name/label for the frontend."
severity: blocker

## Summary

total: 12
passed: 2
issues: 10
pending: 0
skipped: 0

## Gaps

- truth: "Category tree shows correct connector lines with L-shape for last child and child count positioned next to group name"
  status: failed
  reason: "User reported: 1. The last child should have a └── looking end line, not the same ├── line. The lines can also be a little bit more pronounced visually. 2. The count should be next to the group name, not aligned right as it currently is."
  severity: cosmetic
  test: 1
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Weight icons are compact with accent-colored selection, chevron icons, clean row layout with proper element ordering, and hover tooltips on all buttons"
  status: failed
  reason: "User reported: 1. Weight icons too visually heavy — use accent color on icon/border instead of background. 2. Use chevrons not up/down arrows. 3. Reorganize row layout: Parent=folder,name,count,flex,weights,edit/delete; Child=line,drag,name,flex,weights,reset/edit/delete. Don't reserve space for unhovered button groups. 4. Add hover tooltips on all row buttons on desktop."
  severity: cosmetic
  test: 2
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Weight preset strip expands smoothly with animation when hovering on desktop"
  status: failed
  reason: "User reported: The icon group simply appears, no smooth animation. Want buttons to 'grow' out smoothly."
  severity: cosmetic
  test: 3
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Weight changes reflect immediately in the UI with optimistic update and toast feedback"
  status: failed
  reason: "User reported: Weight update is very slow, not immediate. Should be optimistic — update UI instantly, show toast on server success/fail, revert on failure."
  severity: major
  test: 4
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Drag-and-drop into parents is performant with clear visual feedback and no self-grouping bug"
  status: failed
  reason: "User reported: 1. Drag performance is horrible, barely usable — priority fix. 2. Don't use placeholder item — animate highlight on entire group. 3. Dragging ungrouped onto ungrouped to create new parent/child has no visual indicator — highlight parent row and add distinct line at child width. 4. BUG: Dropping ungrouped row back to initial position creates a group with itself."
  severity: blocker
  test: 6
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Dragging a child category to the root area ungroups it"
  status: failed
  reason: "User reported: Not possible to drag a child to become ungrouped. It always selects another ungrouped row and sets it as a parent instead."
  severity: major
  test: 7
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Search filtering works without console errors"
  status: failed
  reason: "User reported: Filtering works but typing first character triggers React useEffect error — sensors array passed to DndContext changes size between renders when toggling DnD enabled/disabled."
  severity: minor
  test: 8
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Newly created category appears in the tree immediately and persists after reload"
  status: failed
  reason: "User reported: Creating a new category seems to succeed but it does not show up in the list even after a page reload. Also needs success/fail toast messages."
  severity: major
  test: 9
  note: "Also: duplicate name check not working — no error shown when creating category with existing name"
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Renaming ungrouped categories updates the name correctly; duplicate name validation works on create"
  status: failed
  reason: "User reported: Renaming ungrouped category does not update name, renders 'New' chip instead. Also duplicate name check not working when creating categories."
  severity: major
  test: 10
  artifacts: []
  missing: []
  debug_session: ""

- truth: "Deleting a parent releases all children to root without data loss; category API operations work with special characters in names"
  status: failed
  reason: "User reported: 1. BUG: Deleting parent also deletes first child. 2. Change behavior to 'Split' group (all categories including parent become ungrouped) instead of delete. 3. BUG: Category names with special chars (AI/ML) break URL routing — need slug/id for API, separate display name for frontend."
  severity: blocker
  test: 12
  artifacts: []
  missing: []
  debug_session: ""
