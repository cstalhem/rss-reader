---
phase: 09.5-refine-main-view-ux-and-typography
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/layout/AppShell.tsx
  - frontend/src/components/layout/Sidebar.tsx
  - frontend/src/components/layout/MobileSidebar.tsx
  - frontend/src/components/layout/Header.tsx
  - frontend/src/lib/constants.ts
autonomous: true
requirements: []

must_haves:
  truths:
    - "Top header bar is removed — no Header component rendered"
    - "Sidebar contains logo/brand at top, feed list in middle, settings icon + theme toggle pinned at bottom"
    - "Collapsed sidebar shows icon-only layout: logo icon at top, feed icons/initials, settings + theme at bottom"
    - "Main content area starts at top of viewport (no pt offset for header)"
    - "Mobile hamburger trigger is in the main content area, not a header bar"
    - "Mobile sidebar drawer still works with feeds, add feed, and close"
  artifacts:
    - path: "frontend/src/components/layout/AppShell.tsx"
      provides: "Layout without Header, passes mobile hamburger open callback down"
    - path: "frontend/src/components/layout/Sidebar.tsx"
      provides: "Full sidebar with logo at top, feeds middle, settings+theme bottom, collapsed icon-only state"
    - path: "frontend/src/components/layout/MobileSidebar.tsx"
      provides: "Mobile drawer with logo, settings link, theme toggle"
  key_links:
    - from: "frontend/src/components/layout/AppShell.tsx"
      to: "frontend/src/components/layout/Sidebar.tsx"
      via: "props: isCollapsed, onToggle, selectedFeedId, onSelectFeed, onAddFeedClick"
      pattern: "Sidebar"
    - from: "frontend/src/components/layout/AppShell.tsx"
      to: "frontend/src/components/article/ArticleList.tsx"
      via: "props: selectedFeedId, onOpenMobileSidebar"
      pattern: "ArticleList"
---

<objective>
Restructure the layout shell — remove the top header bar and absorb its content into the sidebar.

Purpose: Reclaim vertical space by eliminating the header. The sidebar becomes the primary navigation chrome with logo, feeds, and utility actions.
Output: Updated AppShell, Sidebar, and MobileSidebar. Header.tsx becomes dead code (delete in this plan).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09.5-refine-main-view-ux-and-typography/09.5-CONTEXT.md
@.planning/phases/09.5-refine-main-view-ux-and-typography/09.5-RESEARCH.md
@frontend/src/components/layout/AppShell.tsx
@frontend/src/components/layout/Header.tsx
@frontend/src/components/layout/Sidebar.tsx
@frontend/src/components/layout/MobileSidebar.tsx
@frontend/src/lib/constants.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Restructure Sidebar with logo, bottom-pinned utilities, and collapsed icon-only state</name>
  <files>
    frontend/src/components/layout/Sidebar.tsx
    frontend/src/lib/constants.ts
  </files>
  <action>
**Sidebar.tsx — Full restructure:**

The sidebar becomes a Flex column with three sections:
1. **Top:** Logo/brand area — when expanded: "RSS Reader" heading as a link to `/`. When collapsed: a small icon (e.g., `LuRss` in a small circle).
2. **Middle (flex: 1, overflowY: auto):** "Feeds" heading + add button, "All Articles" row, feed list with DnD (existing logic preserved)
3. **Bottom (mt: auto, pinned):**
   - Settings icon link (with new-category dot badge, existing logic from Header.tsx) — when expanded: icon + "Settings" label. When collapsed: icon only.
   - Theme toggle — when expanded: icon + label. When collapsed: icon only.
   - Collapse/expand toggle button

Move the new-category-count query from Header.tsx into the Sidebar (it currently queries `fetchNewCategoryCount` for the dot badge). Import the same query pattern.

**Collapsed state icon-only layout:**
When collapsed, show:
- Top: `LuRss` icon (logo)
- Middle: Each feed shows first letter of title in a small circle (avatar-like). "All Articles" shows a generic inbox icon (`LuInbox` or `LuBookOpen`). Use native `title` attributes for feed names (not Tooltip).
- Bottom: Settings icon (`LuSettings`), theme toggle icon, collapse toggle icon

Update sidebar `top` from `HEADER_HEIGHT` to `"0"` since there's no header anymore.

**constants.ts:**
- Remove `HEADER_HEIGHT` export (it will no longer be used after AppShell update). If HEADER_HEIGHT is referenced elsewhere in the codebase, grep first and update those references. The intent is to fully remove the header height concept.
  </action>
  <verify>
`cd /Users/cstalhem/projects/rss-reader/frontend && bun run lint` — no lint errors. Visually: sidebar renders from top of viewport with logo, feeds, and bottom-pinned utilities.
  </verify>
  <done>
Sidebar starts at top:0 with logo at top, feeds in scrollable middle, settings+theme+collapse pinned at bottom. Collapsed state shows icon-only layout with feed initials. New-category dot badge moved from Header to Sidebar settings icon.
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove Header, update AppShell layout, and update MobileSidebar</name>
  <files>
    frontend/src/components/layout/AppShell.tsx
    frontend/src/components/layout/Header.tsx
    frontend/src/components/layout/MobileSidebar.tsx
  </files>
  <action>
**AppShell.tsx:**
- Remove the `<Header>` import and rendering
- Remove `pt={HEADER_HEIGHT}` from the main content Box — main content should start at top of viewport
- Add an `onOpenMobileSidebar` prop pass-through to ArticleList (or pass the callback as a new prop). ArticleList will render the hamburger button on mobile.
- Keep all existing state (isSidebarCollapsed, selectedFeedId, isMobileSidebarOpen, isAddDialogOpen)

**Header.tsx:**
- Delete this file entirely. Its responsibilities have been moved to Sidebar (logo, settings icon, dot badge, theme toggle) and to the main content area (mobile hamburger).

**MobileSidebar.tsx:**
- Add a logo/brand element at the top of the drawer (same "RSS Reader" heading)
- Add Settings link and Theme toggle to the drawer footer (before or alongside the "Add feed" button)
- The mobile hamburger icon moves to ArticleList (handled in Plan 03 — for now, pass the callback through AppShell → ArticleList via a prop)

**AppShell prop threading:**
Pass `onOpenMobileSidebar={() => setIsMobileSidebarOpen(true)}` as a prop to ArticleList. ArticleList will use it to render a hamburger icon on mobile (Plan 03 handles the rendering).

Update `ArticleListProps` in ArticleList.tsx to accept `onOpenMobileSidebar?: () => void` but don't render anything with it yet — Plan 03 handles that.
  </action>
  <verify>
`cd /Users/cstalhem/projects/rss-reader/frontend && bun run build` — builds successfully with no type errors. Header.tsx deleted. Main content starts at top of viewport.
  </verify>
  <done>
Header.tsx deleted. AppShell no longer renders Header or uses HEADER_HEIGHT for content offset. MobileSidebar has logo and settings/theme in footer. AppShell passes onOpenMobileSidebar to ArticleList.
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && bun run build` — no type errors
2. `cd frontend && bun run lint` — no lint errors
3. Header.tsx no longer exists
4. No remaining imports of Header component in the codebase
5. No remaining references to HEADER_HEIGHT (grep confirms)
</verification>

<success_criteria>
- Header bar is removed from the viewport
- Sidebar spans full viewport height from top:0
- Sidebar has three zones: logo (top), feeds (middle, scrollable), utilities (bottom, pinned)
- Collapsed sidebar shows icons only with feed initials
- New-category dot badge is on the sidebar settings icon
- Mobile sidebar drawer includes logo, settings, and theme toggle
- Main content area has no top padding offset
- AppShell passes onOpenMobileSidebar to ArticleList
</success_criteria>

<output>
After completion, create `.planning/phases/09.5-refine-main-view-ux-and-typography/09.5-02-SUMMARY.md`
</output>
