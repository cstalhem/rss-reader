# Phase 09.5: Refine Main View UX and Typography - Context

**Gathered:** 2026-02-22
**Status:** Ready for planning

<domain>
## Phase Boundary

Polish the article list page and article reader pane — improve information density, typography, layout, navigation, and visual cohesion across the main reading experience. Includes removing the top header bar, restructuring the sidebar, replacing the drawer-based reader with an inline view, and modernizing the content rendering pipeline.

Scope: Article list, article reader, layout shell (AppShell, Header, Sidebar), and content rendering. Settings pages out of scope.

</domain>

<decisions>
## Implementation Decisions

### Article Row Design
- 2-line summary/preview below the title, muted + smaller font size (sm)
- Summary source: use RSS `summary` field for unscored articles; replace with `score_reasoning` once scored
- Subtle brain/sparkle icon prefix on score reasoning text to signal AI-generated content
- Feed source: plain text name only, shown only when viewing mixed feeds (already implemented)
- Category tags stay inline with metadata (feed name + date), not on their own line
- Read/unread state: combine typography weight shift (semibold unread, regular read) + subtle background tint for unread
- Read articles: remove the dot entirely (not hollow dot), collapse the space (no alignment placeholder)
- Unread articles: keep filled accent dot, clickable to toggle
- Mark-unread for read articles: hover-reveal context menu on the far right of the row (reuse categories settings pattern)
- Context menu items: Mark unread, Open original, Rescore
- Remove high-score row background tint (`accent.subtle`) — score badge alone signals high scores
- Keep current scoring state indicators (Queued, Categorizing, Scoring, etc.) as-is

### Layout Restructure
- Remove the top header bar (`Header.tsx`) entirely
- Sidebar absorbs: logo/branding at top, settings icon + theme toggle pinned at bottom
- Collapsed sidebar shows icon-only layout: logo icon at top, feed icons/initials in middle, settings + theme icons at bottom (like VS Code/Slack)
- "Feeds" heading with + icon for add feed stays as current pattern
- Main content area: feed name heading at top, controls bar below, then article list
- Feed name heading shows "Articles" when All Articles selected, specific feed name when a feed is selected
- Mobile: hamburger icon in main content area (top-left next to feed name) opens mobile sidebar drawer

### Toolbar / Controls Bar
- Filter becomes a dropdown (not individual buttons) — shows count on active filter label and all dropdown options
- Filter options: Unread, All, Scoring, Blocked — each with count
- Sort stays as dropdown (current SortSelect pattern)
- Mark all read as icon button — always visible (not conditional), works on all views including All Articles (with confirmation prompt for All)
- Scroll behavior: on scroll, controls bar becomes sticky and feed name collapses to small inline text on the same row as controls (Inoreader-style collapse)

### Reader Layout & Navigation
- Reader replaces the article list in the main content area (not a drawer overlay) — full viewport height
- Sidebar remains visible as normal
- State-based navigation (same URL, component swap) — not route-based
- Sticky reader header: article title (truncated) + Open original icon + Up/Down arrows (prev/next) + X close icon
- Escape key closes the reader (back to list)
- J/K keyboard shortcuts for prev/next article
- Below sticky header: metadata (feed, date, author) → category tags → score + reasoning → content
- Content max-width increased to ~800px (from 680px)
- Typography: refine spacing/sizing within existing Lora (reader) + Inter (UI) font pairing

### Content Rendering
- Replace `dangerouslySetInnerHTML` with `html-react-parser`
- Add DOMPurify sanitization before parsing (belt and suspenders)
- Element replacements: images (responsive/lazy-loaded), code blocks (styled), links (external in new tab with proper rel)
- Images stay constrained (no lightbox), click opens image URL in new tab
- Move reader content CSS styles to theme-level textStyle (single source of truth)

### Component Architecture
- Keep article selection state in the article domain component (not AppShell)
- Rename `ArticleList` to `ArticleFeed` or `ArticleView` — reflects dual role as list/reader container
- Conditional rendering: `selectedArticle === null` shows list, `selectedArticle !== null` shows reader
- Data layer stays mounted regardless of view (article query persists for prev/next navigation)

### Data Layer
- Add `summary` and `score_reasoning` to article list endpoint response (backend change)
- Keep on-demand fetch for full article content (separate query when reader opens)
- New single-article rescore endpoint: `POST /api/articles/{id}/rescore`
- Per-article rescore triggered from context menu, uses new endpoint

### Claude's Discretion
- Exact scroll-collapse animation/transition timing
- Sidebar collapsed icon choices (feed initials vs generic icon)
- Spacing/sizing refinements for reader typography within Lora + Inter pairing
- Context menu visual style details
- Responsive breakpoint adjustments for the new layout
- Empty state handling in the reader (loading spinner, error states)

</decisions>

<specifics>
## Specific Ideas

- "Like Inoreader's feed page header" — feed name prominently at top, controls bar below, scroll-to-collapse behavior where title shrinks inline with controls
- Context menu pattern reused from Categories settings section (hover-reveal on the far right of rows)
- Score reasoning replacing summary is the primary "why should I read this" signal in the list view — brain/sparkle icon distinguishes it from plain RSS summary

</specifics>

<deferred>
## Deferred Ideas

- Article search (visible in Inoreader reference) — separate feature/phase
- View mode switching (grid/card/list like Inoreader icons) — separate feature/phase
- Per-article feedback (thumbs up/down) — Phase 10: LLM Feedback Loop

</deferred>

---

*Phase: 09.5-refine-main-view-ux-and-typography*
*Context gathered: 2026-02-22*
