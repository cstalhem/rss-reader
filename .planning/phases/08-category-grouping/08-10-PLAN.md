---
phase: 08-category-grouping
plan: 10
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/settings/CategoryRow.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Badge dismiss X icon appears with proper spacing, divider, and expands chip on hover"
  artifacts:
    - path: "frontend/src/components/settings/CategoryRow.tsx"
      provides: "Badge chips with expandable X section"
      pattern: "maxW.*opacity.*borderRight"
  key_links:
    - from: "frontend/src/components/settings/CategoryRow.tsx"
      to: "isHovered state"
      via: "maxW transition"
      pattern: "maxW=.*isHovered.*transition"
---

<objective>
Improve badge dismiss X icon design with proper spacing, a vertical divider, and width expansion on hover instead of pre-reserving space.

Purpose: Enhance visual polish and interaction clarity for New/Returned category badges per user feedback
Output: Badge chips that expand on hover to reveal X icon section with divider
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-category-grouping/08-08-SUMMARY.md
@.planning/phases/08-category-grouping/08-UAT.md

@frontend/src/components/settings/CategoryRow.tsx
</context>

<tasks>

<task type="auto">
  <name>Redesign badge X icon with expandable section, padding, and divider</name>
  <files>
    frontend/src/components/settings/CategoryRow.tsx
  </files>
  <action>
Update the New and Returned badge chips (lines 103-147) to implement the requested design:

**Current pattern (lines 113-122 and 136-145):**
```tsx
<Flex alignItems="center" gap={0.5}>
  <LuX
    size={10}
    style={{
      opacity: isHovered ? 1 : 0,
      transition: "opacity 0.15s",
    }}
  />
  New
</Flex>
```

**New pattern:**
```tsx
<Flex alignItems="center" gap={0}>
  <Box
    display="flex"
    alignItems="center"
    maxW={isHovered ? "16px" : "0"}
    overflow="hidden"
    transition="max-width 0.15s"
    pl={isHovered ? 1.5 : 0}
    pr={1}
    borderRight={isHovered ? "1px solid" : undefined}
    borderColor="border.subtle"
  >
    <LuX size={10} />
  </Box>
  <Box pl={2}>New</Box>
</Flex>
```

Apply the same pattern to both badges (New and Returned).

Key changes:
1. **No pre-reserved space** - maxW=0 when not hovered, no gap between Flex children initially
2. **Width expansion** - maxW transitions from 0 to 16px on hover
3. **Left padding** - pl={1.5} adds spacing before icon when visible
4. **Vertical divider** - borderRight with border.subtle color separates X from text
5. **Right padding on text** - pl={2} on text Box for spacing after divider

Gap reason from UAT: "Need more spacing between left edge and X icon, full-height divider between X and text, and chip should expand on hover to reveal X section rather than pre-reserving invisible space"
  </action>
  <verify>
```bash
cd frontend && bun run build
```
Should build successfully. In dev server, hover over New/Returned badges:
- Badge width should visibly expand on hover
- X icon should appear with left padding
- A vertical divider line should separate X from badge text
- When not hovered, badge should be narrower with no reserved space for X
  </verify>
  <done>
Badge chips expand on hover to reveal X icon section with proper left padding, full-height vertical divider, and smooth width transition. No space is pre-reserved when not hovered.
  </done>
</task>

</tasks>

<verification>
Build passes. Visual inspection confirms badge expansion, spacing, and divider appearance on hover.
</verification>

<success_criteria>
- Badge width animates smoothly on hover
- X icon has visible left padding when revealed
- Vertical divider separates X icon from badge text
- No invisible reserved space exists when badge is not hovered
- UAT test #9 passes with improved badge dismiss design
</success_criteria>

<output>
After completion, create `.planning/phases/08-category-grouping/08-10-SUMMARY.md`
</output>
