---
phase: 08-category-grouping
plan: 06
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/app/settings/page.tsx
  - frontend/src/components/settings/InterestsSection.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Settings sidebar position stays stable when switching between all sections"
    - "Interests section visual design matches the Ollama section panel card pattern"
  artifacts:
    - path: "frontend/src/app/settings/page.tsx"
      provides: "Scrollbar-stable content area"
      contains: "scrollbar-gutter"
    - path: "frontend/src/components/settings/InterestsSection.tsx"
      provides: "Panel-wrapped interests form matching Ollama pattern"
      contains: "bg.subtle"
  key_links: []
---

<objective>
Fix settings page scrollbar layout shift and restyle Interests section to match Ollama panel pattern.

Purpose: Two independent cosmetic fixes from UAT feedback -- the sidebar shifts when switching sections due to scrollbar appearance, and the Interests section doesn't match the visual pattern established in Ollama/Categories sections.
Output: Stable sidebar layout and consistent panel design across settings sections.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@frontend/src/app/settings/page.tsx
@frontend/src/components/settings/InterestsSection.tsx
@frontend/src/components/settings/OllamaSection.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix scrollbar layout shift on settings page</name>
  <files>frontend/src/app/settings/page.tsx</files>
  <action>
The desktop content area (the `Box flex={1} minW={0}` wrapping the display-toggled sections) causes the sidebar to shift when switching between sections that do/don't trigger a vertical scrollbar. Fix by adding `overflow-y: auto` and `scrollbar-gutter: stable` CSS to the desktop content Box. This reserves scrollbar space permanently so the layout never shifts.

Specifically, on the `<Box flex={1} minW={0}>` element (line ~34), add:
- `overflowY="auto"`
- `css={{ scrollbarGutter: "stable" }}`
- `maxH="calc(100vh - 88px - 64px)"` (viewport minus header and container padding) to make it the scrollable container

This ensures the scrollbar gutter is always reserved regardless of content height, preventing the sidebar pixel shift.
  </action>
  <verify>
Run `bun run build --dir frontend` to confirm no build errors. Visually: switching between Feeds/Interests and Categories/Ollama sections should show no sidebar position shift.
  </verify>
  <done>Settings sidebar remains perfectly stable when switching between all five sections on desktop.</done>
</task>

<task type="auto">
  <name>Task 2: Restyle Interests section to match Ollama panel pattern</name>
  <files>frontend/src/components/settings/InterestsSection.tsx</files>
  <action>
Restructure the InterestsSection layout to match the panel card pattern used in OllamaSection:

1. Keep the section title "Interest Preferences" as the top-level heading (outside any panel).
2. Wrap both text fields and the save button inside a single panel Box with props: `bg="bg.subtle" borderRadius="md" borderWidth="1px" borderColor="border.subtle" p={6}`.
3. Replace the Field `label` prop with standalone Text elements above each Textarea, using the subheader style: `fontSize="sm"`, `fontWeight="semibold"`, `color="fg.muted"`, `textTransform="uppercase"`, `letterSpacing="wider"`. These act as visual section labels matching the pattern in CategoriesSection's "Ungrouped" heading and OllamaSection subheaders.
4. Keep the Field `helperText` prop for the helper text below each textarea.
5. Remove the unused `label` prop from Field (set it to empty string or remove if the Field component allows no label).

Result should look like:
```
Interest Preferences (heading)
[Panel box]
  INTERESTS (subheader)
  helper text
  [textarea]

  ANTI-INTERESTS (subheader)
  helper text
  [textarea]

  [Save button]
[/Panel box]
```
  </action>
  <verify>
Run `bun run build --dir frontend` to confirm no build errors. Visually: Interests section should have a single panel card containing both text areas with uppercase subheader labels, matching the visual weight of Ollama section panels.
  </verify>
  <done>Interests section renders inside a panel box with uppercase subheader labels matching the Ollama and Categories section visual pattern.</done>
</task>

</tasks>

<verification>
- `bun run build --dir frontend` succeeds with no errors
- Settings page sidebar is stable across all section switches
- Interests section uses panel card pattern consistent with Ollama section
</verification>

<success_criteria>
- No sidebar layout shift when switching between any settings sections
- Interests section visually matches Ollama/Categories panel card pattern
</success_criteria>

<output>
After completion, create `.planning/phases/08-category-grouping/08-06-SUMMARY.md`
</output>
