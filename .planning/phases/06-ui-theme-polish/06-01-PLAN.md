---
phase: 06-ui-theme-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/theme/colors.ts
  - frontend/src/theme/typography.ts
  - frontend/src/theme/index.ts
  - frontend/src/app/layout.tsx
autonomous: true

must_haves:
  truths:
    - "Dark mode backgrounds have a warm brownish/amber undertone instead of cool blue-gray"
    - "Three distinct surface levels are visible: base background, panel/sidebar, and overlay/drawer"
    - "Text is high contrast but not pure white -- slightly warm tint"
    - "Borders are visible but subtle with warm tint"
    - "Orange accent remains vibrant and unchanged"
    - "Fira Code font loads and is available via the mono font token"
  artifacts:
    - path: "frontend/src/theme/colors.ts"
      provides: "Warm-tinted OKLCH semantic tokens for bg, fg, and border"
      contains: "oklch.*0\\.01.*55"
    - path: "frontend/src/theme/typography.ts"
      provides: "Mono font token for Fira Code"
      contains: "mono"
    - path: "frontend/src/app/layout.tsx"
      provides: "Fira Code font loading via next/font/google"
      contains: "Fira_Code"
  key_links:
    - from: "frontend/src/app/layout.tsx"
      to: "frontend/src/theme/typography.ts"
      via: "CSS variable --font-mono set on body, referenced in font token"
      pattern: "--font-mono"
    - from: "frontend/src/theme/index.ts"
      to: "frontend/src/theme/colors.ts"
      via: "semanticTokens import includes new bg/fg/border overrides"
      pattern: "semanticTokens"
---

<objective>
Establish warm-tinted dark mode color foundation and Fira Code font loading.

Purpose: All subsequent polish work (reader typography, skeletons, settings) inherits these colors automatically via semantic tokens. This must land first so the warm aesthetic is consistent across everything.

Output: Updated theme tokens (colors.ts, typography.ts, index.ts) and Fira Code loaded in layout.tsx.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-ui-theme-polish/06-CONTEXT.md
@.planning/phases/06-ui-theme-polish/06-RESEARCH.md
@frontend/src/theme/colors.ts
@frontend/src/theme/typography.ts
@frontend/src/theme/index.ts
@frontend/src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Override dark mode semantic tokens with warm OKLCH palette</name>
  <files>frontend/src/theme/colors.ts</files>
  <action>
Add semantic token overrides for `bg`, `fg`, and `border` to the existing `semanticTokens` export. Keep the existing `accent` tokens unchanged (orange stays vibrant per user decision). Only override `_dark` values -- set `_light` to Chakra defaults so light mode is unaffected.

Use OKLCH color space with hue ~55 (warm amber) and low chroma (0.01-0.02) for subtle warmth:

**Background tokens (three surface levels per user decision):**
- `bg.DEFAULT`: ~15% lightness (base background) -- `oklch(15% 0.010 55)`
- `bg.subtle`: ~17% lightness (sidebar, card backgrounds) -- `oklch(17% 0.012 55)`
- `bg.muted`: ~20% lightness (hover states) -- `oklch(20% 0.014 55)`
- `bg.emphasized`: ~24% lightness (active/selected states) -- `oklch(24% 0.016 55)`
- `bg.panel`: ~16% lightness (header, fixed panels) -- `oklch(16% 0.011 55)`

**Foreground tokens (high contrast but not pure white):**
- `fg.DEFAULT`: ~93% lightness (primary text) -- `oklch(93% 0.005 55)`
- `fg.muted`: ~65% lightness (secondary text) -- `oklch(65% 0.008 55)`
- `fg.subtle`: ~50% lightness (tertiary/disabled) -- `oklch(50% 0.006 55)`

**Border tokens (warm-tinted, subtle):**
- `border.DEFAULT`: ~30% lightness -- `oklch(30% 0.012 55)`
- `border.subtle`: ~22% lightness (faint separators) -- `oklch(22% 0.010 55)`
- `border.emphasized`: ~35% lightness (strong borders) -- `oklch(35% 0.014 55)`

These values come from the RESEARCH.md recommendations. The existing `colorTokens` (accent palette) stays unchanged.

Structure: add the bg, fg, and border tokens alongside the existing accent tokens in the `semanticTokens` object using `defineSemanticTokens.colors()`. For `_light` values, use sensible Chakra defaults: `"white"` for bg.DEFAULT, `"{colors.gray.50}"` for bg.subtle, `"{colors.gray.950}"` for fg.DEFAULT, etc.
  </action>
  <verify>Run `cd /Users/cstalhem/projects/rss-reader/frontend && npx tsc --noEmit` to confirm no type errors. Visually inspect colors.ts to confirm all tokens have both `_light` and `_dark` values.</verify>
  <done>colors.ts exports semantic tokens with warm OKLCH dark mode overrides for bg (5 levels), fg (3 levels), and border (3 levels). Accent tokens unchanged. No TypeScript errors.</done>
</task>

<task type="auto">
  <name>Task 2: Add Fira Code font loading and mono font token</name>
  <files>frontend/src/theme/typography.ts, frontend/src/app/layout.tsx</files>
  <action>
**In typography.ts:**
Add a `mono` entry to the existing `fontTokens`:
```
mono: { value: "var(--font-mono), 'Fira Code', monospace" },
```

**In layout.tsx:**
1. Import `Fira_Code` from `next/font/google` alongside the existing `Inter` and `Lora` imports.
2. Initialize it: `const firaCode = Fira_Code({ subsets: ["latin"], variable: "--font-mono" });`
3. Add its variable class to the `<body>` className: `${inter.variable} ${lora.variable} ${firaCode.variable}`

No other changes to layout.tsx or typography.ts.
  </action>
  <verify>Run `cd /Users/cstalhem/projects/rss-reader/frontend && npx tsc --noEmit` to confirm no type errors. Verify layout.tsx body has all three font variable classes.</verify>
  <done>Fira Code loaded via next/font/google in layout.tsx. Mono font token available in typography.ts for use in code block styling. TypeScript clean.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes in frontend directory
- colors.ts has bg, fg, border semantic tokens with `_dark` values using OKLCH hue ~55
- typography.ts has `mono` font token referencing `--font-mono`
- layout.tsx imports and initializes `Fira_Code`, adds its CSS variable to body
- Accent palette (orange) is unchanged in colorTokens
- All semantic tokens have both `_light` and `_dark` values
</verification>

<success_criteria>
The warm dark mode foundation is in place. All existing components that reference `bg.subtle`, `fg.muted`, `border.subtle`, etc. will automatically render with the new warm-tinted colors. Fira Code is loaded and available via the `mono` font token for use in reader code blocks (Plan 02).
</success_criteria>

<output>
After completion, create `.planning/phases/06-ui-theme-polish/06-01-SUMMARY.md`
</output>
