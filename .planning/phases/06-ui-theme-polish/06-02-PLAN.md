---
phase: 06-ui-theme-polish
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - frontend/src/components/article/ArticleReader.tsx
  - frontend/src/components/article/ArticleRowSkeleton.tsx
  - frontend/src/components/article/ArticleList.tsx
  - frontend/src/components/feed/EmptyFeedState.tsx
  - frontend/src/components/ui/toaster.tsx
autonomous: true

must_haves:
  truths:
    - "Reader body content is constrained to ~680px max-width, centered in the drawer"
    - "Article title in reader is larger with more breathing room, in sans-serif (Inter)"
    - "Code blocks in reader use Fira Code font with distinct background and proper padding"
    - "Article list shows layout-matched skeletons with shimmer during loading"
    - "Empty article list states show icon + descriptive message"
    - "Empty feed sidebar shows icon + message + action prompt"
    - "Toasts auto-dismiss and all API mutations have toast feedback"
  artifacts:
    - path: "frontend/src/components/article/ArticleReader.tsx"
      provides: "Polished reader with constrained body, improved header, Fira Code code blocks"
      contains: "maxW.*680"
    - path: "frontend/src/components/article/ArticleRowSkeleton.tsx"
      provides: "Skeleton component matching ArticleRow layout"
      contains: "Skeleton"
    - path: "frontend/src/components/article/ArticleList.tsx"
      provides: "Uses ArticleRowSkeleton for loading state, enhanced empty states"
      contains: "ArticleRowSkeleton"
    - path: "frontend/src/components/feed/EmptyFeedState.tsx"
      provides: "Rich empty state with icon and action prompt"
      contains: "LuRss"
  key_links:
    - from: "frontend/src/components/article/ArticleList.tsx"
      to: "frontend/src/components/article/ArticleRowSkeleton.tsx"
      via: "import and render during isLoading"
      pattern: "import.*ArticleRowSkeleton"
    - from: "frontend/src/components/article/ArticleReader.tsx"
      to: "frontend/src/theme/typography.ts"
      via: "mono font token used in code block CSS"
      pattern: "fontFamily.*mono"
---

<objective>
Polish article reading experience and component loading/empty states.

Purpose: The reader is where users spend most of their time -- constrained width and better typography make long articles comfortable. Skeletons prevent layout shift on load. Empty states guide new users. Toast feedback confirms all actions.

Output: Improved ArticleReader, new ArticleRowSkeleton, enhanced empty states, toast auto-dismiss.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-ui-theme-polish/06-CONTEXT.md
@.planning/phases/06-ui-theme-polish/06-RESEARCH.md
@.planning/phases/06-ui-theme-polish/06-01-SUMMARY.md
@frontend/src/components/article/ArticleReader.tsx
@frontend/src/components/article/ArticleList.tsx
@frontend/src/components/article/ArticleRow.tsx
@frontend/src/components/feed/EmptyFeedState.tsx
@frontend/src/components/ui/toaster.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Improve reader typography, header, and code blocks</name>
  <files>frontend/src/components/article/ArticleReader.tsx</files>
  <action>
Modify the existing ArticleReader.tsx with these specific changes:

**1. Article header "masthead" improvement:**
- Increase title font size from `2xl` to `3xl`
- Set title `fontFamily="sans"` explicitly (Inter -- per user decision: "Article title in sans-serif")
- Add `fontWeight="700"` and `letterSpacing="-0.01em"` for a more prominent title
- Increase `lineHeight` to `"1.25"` for tighter multi-line titles
- Increase gap in the header Flex from `4` to `5`
- Increase `mb` on the header Flex from `8` to `10` for more breathing room before body

**2. Constrain body content width:**
- Wrap the article body `<Box textStyle="reader" ...>` with `maxW="680px"` and `mx="auto"` to center it within the drawer
- The header section above the body should NOT be width-constrained (it spans the full drawer width)

**3. Polish code block styling in the `css` prop:**
Replace the existing `"& pre"` and `"& code"` rules with:
```
"& pre": {
  bg: "oklch(13% 0.008 55)",   // Darker than body background for contrast
  p: 5,
  borderRadius: "lg",
  overflowX: "auto",
  my: 5,
  borderWidth: "1px",
  borderColor: "border.subtle",
},
"& code": {
  fontFamily: "mono",           // Uses Fira Code via the mono token from Plan 01
  fontSize: "0.875em",
  lineHeight: "1.6",
},
"& pre code": {
  bg: "transparent",
  p: 0,
},
"& :not(pre) > code": {
  bg: "bg.emphasized",
  px: 1.5,
  py: 0.5,
  borderRadius: "sm",
  fontSize: "0.875em",
},
```

Do NOT change: drawer width (75vw), body font size (1.125rem), line height (1.75), nav buttons, category tags, score display, auto-mark-as-read, or any other existing functionality.
  </action>
  <verify>Run `cd /Users/cstalhem/projects/rss-reader/frontend && npx tsc --noEmit` to confirm no type errors.</verify>
  <done>Reader has constrained 680px body, prominent sans-serif title with breathing room, Fira Code code blocks with distinct background and padding. All existing functionality preserved.</done>
</task>

<task type="auto">
  <name>Task 2: Add article row skeletons, enhance empty states, configure toast auto-dismiss</name>
  <files>
    frontend/src/components/article/ArticleRowSkeleton.tsx
    frontend/src/components/article/ArticleList.tsx
    frontend/src/components/feed/EmptyFeedState.tsx
    frontend/src/components/ui/toaster.tsx
  </files>
  <action>
**1. Create ArticleRowSkeleton.tsx** (new file):
A skeleton component that mirrors the exact layout of ArticleRow to prevent layout shift:
```tsx
"use client";

import { Box, Flex, Skeleton } from "@chakra-ui/react";

export function ArticleRowSkeleton() {
  return (
    <Flex py={3} px={4} gap={3} borderBottom="1px solid" borderColor="border.subtle">
      {/* Read dot placeholder */}
      <Box flexShrink={0} alignSelf="center" px={2}>
        <Skeleton variant="shine" borderRadius="full" boxSize="10px" />
      </Box>
      {/* Content area */}
      <Flex flex={1} direction="column" gap={2}>
        <Skeleton variant="shine" height="18px" width="75%" />
        <Skeleton variant="shine" height="14px" width="45%" />
      </Flex>
      {/* Score badge placeholder */}
      <Skeleton variant="shine" height="22px" width="36px" borderRadius="md" alignSelf="center" />
    </Flex>
  );
}
```
Note: Use `variant="shine"` for shimmer animation. If Chakra v3 doesn't support this variant, fall back to no variant (default pulse is acceptable -- see RESEARCH.md open question #1).

**2. Update ArticleList.tsx loading state:**
- Import `ArticleRowSkeleton` from `./ArticleRowSkeleton`
- Replace the current loading skeleton block (the `Stack` with generic `Skeleton` boxes) with 5 instances of `<ArticleRowSkeleton />` wrapped in a `<Box>`
- Remove the `Skeleton` import from chakra since it's no longer used directly in this file (keep `Stack` if still used elsewhere in the component -- check first)

**3. Enhance ArticleList.tsx empty states:**
Replace the current plain text empty state with an icon-based empty state for each filter tab. Import icons from `react-icons/lu`:
- `LuCheckCircle` for "unread" (all caught up)
- `LuInbox` for "all" (no articles yet)
- `LuClock` is already imported -- reuse for "scoring"
- `LuBan` for "blocked"

Replace the current empty state `<Flex>` at the bottom of the article list with a version that shows:
- An icon (boxSize 12, color `fg.subtle`)
- The existing `emptyMessage` text (fontSize `lg`, color `fg.muted`, textAlign `center`)
- For the "all" empty state specifically, add a small helper text below: "Add feeds from the sidebar to get started" (fontSize `sm`, color `fg.subtle`)

Keep the empty state in a centered Flex with `direction="column"`, `alignItems="center"`, `gap={4}`, `py={16}`, `px={8}`.

**4. Enhance EmptyFeedState.tsx:**
Replace the current plain text empty state with:
- Import `{ LuRss }` from `react-icons/lu` and `Icon` from `@chakra-ui/react`
- Icon: `<Icon as={LuRss} boxSize={10} color="fg.subtle" />`
- Message: "No feeds yet" (fontSize `md`, color `fg.muted`)
- Subtext: "Tap + above to add your first feed" (fontSize `sm`, color `fg.subtle`)
- Keep the centered Flex layout, adjust to `direction="column"` with `gap={3}`

**5. Configure toast auto-dismiss in toaster.tsx:**
Add `duration: 4000` to the `createToaster` config (4 seconds auto-dismiss). This is a single-line change to the existing config object. The toaster already handles success/error toasts for settings saves -- this just sets a default auto-dismiss duration.

**Toast coverage audit:** The settings page already has toast callbacks for all its mutations (preferences save, category weight update). The feed mutations in `useFeedMutations.ts` do NOT have toast callbacks -- but these are called from the sidebar which uses inline feedback (the feed list updates optimistically). Adding toasts to every feed mutation would be noisy for quick actions like reorder. Leave feed mutations as-is -- the settings page Feeds section (Plan 03) will add toasts for its own add/delete operations. No changes needed to useFeedMutations.ts.
  </action>
  <verify>Run `cd /Users/cstalhem/projects/rss-reader/frontend && npx tsc --noEmit` to confirm no type errors. Verify ArticleRowSkeleton.tsx exists and is imported in ArticleList.tsx.</verify>
  <done>Article list shows layout-matched skeletons during loading. Empty states show icons with descriptive messages. EmptyFeedState has icon and action prompt. Toasts auto-dismiss after 4 seconds.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes in frontend directory
- ArticleReader.tsx has `maxW="680px"` on body, `fontSize="3xl"` on title, `fontFamily: "mono"` in code block CSS
- ArticleRowSkeleton.tsx exists and matches ArticleRow layout structure (dot + content + badge)
- ArticleList.tsx imports and uses ArticleRowSkeleton for loading state
- ArticleList.tsx empty states include icons from react-icons/lu
- EmptyFeedState.tsx shows LuRss icon with descriptive text
- toaster.tsx has `duration: 4000` in createToaster config
</verification>

<success_criteria>
Reader provides a comfortable reading experience with constrained width and polished code blocks. Loading states use shimmer skeletons that match real content layout. Empty states guide users with icons and helpful messages. Toasts auto-dismiss consistently.
</success_criteria>

<output>
After completion, create `.planning/phases/06-ui-theme-polish/06-02-SUMMARY.md`
</output>
