---
phase: 02-article-reading-ui
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/package.json
  - frontend/src/app/layout.tsx
  - frontend/src/app/globals.css
  - frontend/src/app/page.tsx
  - frontend/src/app/page.module.css
  - frontend/next.config.ts
  - frontend/tsconfig.json
  - frontend/src/components/ui/provider.tsx
  - frontend/src/theme/index.ts
  - frontend/src/theme/colors.ts
  - frontend/src/theme/typography.ts
  - frontend/src/components/layout/Header.tsx
  - frontend/src/components/layout/Sidebar.tsx
  - frontend/src/components/layout/AppShell.tsx
  - frontend/src/components/theme/ThemeToggle.tsx
autonomous: true

must_haves:
  truths:
    - "App renders with Chakra UI dark theme by default"
    - "User can toggle between dark and light themes via button in header"
    - "Theme preference persists across page refreshes (localStorage)"
    - "App has header with logo/title and theme toggle"
    - "App has collapsible sidebar navigation"
    - "Orange accent color is visible in UI elements"
  artifacts:
    - path: "frontend/src/theme/index.ts"
      provides: "Custom Chakra theme system with orange accent"
    - path: "frontend/src/components/ui/provider.tsx"
      provides: "Chakra + ColorMode provider for Next.js"
    - path: "frontend/src/components/layout/Header.tsx"
      provides: "Header with branding and theme toggle"
    - path: "frontend/src/components/layout/Sidebar.tsx"
      provides: "Collapsible sidebar navigation"
    - path: "frontend/src/components/layout/AppShell.tsx"
      provides: "Main layout combining header, sidebar, content area"
  key_links:
    - from: "frontend/src/app/layout.tsx"
      to: "frontend/src/components/ui/provider.tsx"
      via: "Provider wrapping children"
      pattern: "<Provider>"
    - from: "frontend/src/components/ui/provider.tsx"
      to: "frontend/src/theme/index.ts"
      via: "Custom theme system"
      pattern: "createSystem|system"
---

<objective>
Set up Chakra UI v3 with a custom theme and build the application shell layout.

Purpose: Establish the visual foundation — theme system, dark/light mode, and the structural layout (header, sidebar, content area) that all subsequent plans build upon.

Output: A working Next.js app with Chakra UI v3, custom orange-accented theme (dark default), header with theme toggle, and collapsible sidebar.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-article-reading-ui/02-CONTEXT.md
@.planning/phases/02-article-reading-ui/02-RESEARCH.md
@frontend/package.json
@frontend/src/app/layout.tsx
@frontend/next.config.ts
@frontend/tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Chakra UI and create custom theme system</name>
  <files>
    frontend/package.json
    frontend/tsconfig.json
    frontend/next.config.ts
    frontend/src/theme/index.ts
    frontend/src/theme/colors.ts
    frontend/src/theme/typography.ts
    frontend/src/components/ui/provider.tsx
    frontend/src/app/layout.tsx
    frontend/src/app/globals.css
    frontend/src/app/page.tsx
    frontend/src/app/page.module.css
  </files>
  <action>
    **Use the Chakra UI MCP server** (`mcp__chakra-ui__*` tools) for component examples and API verification throughout this task.

    1. Install dependencies in the frontend directory:
       ```bash
       cd frontend && npm install @chakra-ui/react @emotion/react
       ```

    2. Run Chakra CLI to generate UI component snippets:
       ```bash
       cd frontend && npx @chakra-ui/cli snippet add
       ```
       This creates `src/components/ui/provider.tsx` and other base components. If the CLI prompts for components, add all available snippets.

    3. Update `next.config.ts` to add optimizePackageImports for Chakra:
       ```typescript
       const nextConfig: NextConfig = {
         output: 'standalone',
         experimental: {
           optimizePackageImports: ["@chakra-ui/react"],
         },
       };
       ```

    4. Update `tsconfig.json` — change `target` to `ESNext` (Chakra v3 requirement per installation guide).

    5. Create `frontend/src/theme/colors.ts`:
       - Define custom orange accent using the user's exact color: `oklch(64.6% 0.222 41.116)`
       - Use Chakra's `defineTokens` and `defineSemanticTokens` to create an "accent" color palette based on orange
       - Map accent tokens for both light and dark modes

    6. Create `frontend/src/theme/typography.ts`:
       - Import a sans-serif font (Inter or similar) via `next/font/google` for UI elements
       - Import a serif font (Lora, Merriweather, or similar) via `next/font/google` for article reader content
       - Define font tokens and text style overrides for Chakra
       - NOTE: Font imports via `next/font/google` must happen in a client or layout file, not in the theme config. Define CSS variable names in the theme and set the actual font variables in layout.tsx.

    7. Create `frontend/src/theme/index.ts`:
       - Use Chakra v3's `createSystem` and `defaultConfig` to create a custom theme system
       - Import and merge color tokens from colors.ts
       - Import and merge typography tokens from typography.ts
       - Set `defaultTheme: "dark"` in the theme config (user decision: dark mode default)
       - Export the system for use in the provider

    8. Update `frontend/src/components/ui/provider.tsx` (generated by CLI):
       - Ensure it uses the custom system from `@/theme/index.ts` instead of the default
       - The CLI-generated provider likely uses `defaultSystem` — replace with custom system

    9. Rewrite `frontend/src/app/layout.tsx`:
       - Remove the default Next.js template content
       - Import Provider from `@/components/ui/provider`
       - Add `suppressHydrationWarning` to the `<html>` tag (prevents theme flash)
       - Import fonts from `next/font/google` and apply CSS variables to body
       - Set proper metadata: title "RSS Reader", description matching the app purpose

    10. Replace `frontend/src/app/page.tsx` with a minimal placeholder that uses Chakra components:
        - A centered Box with "RSS Reader" heading
        - Uses semantic tokens (bg, fg) to verify theme is working
        - Remove the default Next.js boilerplate entirely

    11. Delete or empty `frontend/src/app/page.module.css` and clean up `frontend/src/app/globals.css`:
        - Remove all default Next.js CSS
        - globals.css should only contain minimal resets if any (Chakra handles most styling)
  </action>
  <verify>
    ```bash
    cd frontend && npm run build
    ```
    Build succeeds without errors. The provider, theme, and layout files compile correctly.
  </verify>
  <done>
    - Chakra UI v3 installed and configured with custom theme system
    - Dark mode is the default theme
    - Orange accent color defined in theme tokens
    - Sans-serif and serif fonts configured via next/font/google
    - Provider wraps the app in layout.tsx with suppressHydrationWarning
    - Default Next.js boilerplate removed
    - Build passes cleanly
  </done>
</task>

<task type="auto">
  <name>Task 2: Build application shell layout</name>
  <files>
    frontend/src/components/layout/Header.tsx
    frontend/src/components/layout/Sidebar.tsx
    frontend/src/components/layout/AppShell.tsx
    frontend/src/components/theme/ThemeToggle.tsx
    frontend/src/app/page.tsx
  </files>
  <action>
    **Use the Chakra UI MCP server** for component examples (especially `button`, `icon`, `box`, `flex`, `stack`).

    1. Create `frontend/src/components/theme/ThemeToggle.tsx`:
       - 'use client' directive (uses color mode hook)
       - Use Chakra's `useColorMode` hook (from the generated ui snippets or Chakra API)
       - Render an IconButton that toggles between dark and light modes
       - Use sun/moon icons (can use simple unicode or inline SVG — no icon library needed)
       - Style with the accent color palette

    2. Create `frontend/src/components/layout/Header.tsx`:
       - 'use client' directive
       - Fixed header at top of viewport
       - Left: App title "RSS Reader" in a clean sans-serif style
       - Right: ThemeToggle button
       - Use semantic tokens: `bg.panel` for background, `border.subtle` for bottom border
       - Height: ~56-64px
       - Minimal, clean aesthetic with subtle bottom border

    3. Create `frontend/src/components/layout/Sidebar.tsx`:
       - 'use client' directive
       - Collapsible sidebar on the left side
       - Contains a collapse/expand toggle button
       - When expanded: ~240px width, shows "Feeds" section header (placeholder for Phase 3)
       - When collapsed: ~48px width, shows only the collapse toggle icon
       - Use `bg.subtle` for sidebar background
       - Responsive: on screens smaller than `md` breakpoint, sidebar is hidden by default (overlay mode or hidden)
       - Animate width transition with CSS transition (not Chakra animation — simpler)
       - Store collapse state in component state (no persistence needed)

    4. Create `frontend/src/components/layout/AppShell.tsx`:
       - 'use client' directive
       - Combines Header + Sidebar + main content area
       - Layout: Header fixed at top, Sidebar on left below header, content fills remaining space
       - Use CSS Flexbox for the layout
       - Content area scrolls independently (overflow-y: auto)
       - Accept `children` prop for the main content area
       - Export as default

    5. Update `frontend/src/app/page.tsx`:
       - Import and use AppShell as the outer layout
       - Replace placeholder with a content area that will hold the article list (for now, show a centered "Articles will appear here" text using Chakra Text component)
       - This validates the full shell renders correctly

    NOTE: The sidebar will be mostly empty in this phase — it serves as the structural container for Phase 3 (Feed Management) to populate. Include placeholder text like "All Articles" as a nav item to demonstrate the layout works.
  </action>
  <verify>
    ```bash
    cd frontend && npm run build
    ```
    Build succeeds. Manually verify (or describe how to verify):
    - App renders with dark background
    - Header visible at top with "RSS Reader" title and theme toggle
    - Theme toggle switches between dark and light modes
    - Sidebar visible on left, can collapse/expand
    - Content area fills remaining space
  </verify>
  <done>
    - Header renders with app title and theme toggle
    - ThemeToggle switches between dark/light mode and preference persists (via Chakra's built-in localStorage)
    - Sidebar is collapsible (expanded/collapsed states)
    - AppShell combines header + sidebar + scrollable content area
    - Layout is responsive (sidebar hidden on small screens)
    - Orange accent visible on interactive elements
    - Clean, minimal aesthetic with semantic tokens
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run build` completes without errors
2. `cd frontend && npm run dev` starts dev server
3. Dark theme renders by default (dark background, light text)
4. Theme toggle switches between dark and light modes
5. Orange accent color visible on toggle button or interactive elements
6. Header stays fixed at top while content scrolls
7. Sidebar collapses and expands with smooth transition
</verification>

<success_criteria>
- Chakra UI v3 fully integrated with custom theme (dark default, orange accent)
- Application shell renders: Header (fixed top) + Sidebar (collapsible left) + Content (scrollable center)
- Theme toggle in header works and persists across refreshes
- Build passes without errors
- Ready for article list components (Plan 02-03)
</success_criteria>

<output>
After completion, create `.planning/phases/02-article-reading-ui/02-01-SUMMARY.md`
</output>
